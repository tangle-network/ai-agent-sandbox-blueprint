# ─────────────────────────────────────────────────────────────────────────────
# AI Agent Sandbox Blueprint — Environment Variables
# ─────────────────────────────────────────────────────────────────────────────

# ── Core ──────────────────────────────────────────────────────────────────────

# Directory for persistent JSON stores (sandboxes, workflows, provisions)
BLUEPRINT_STATE_DIR=/var/lib/sandbox-blueprint

# Secret key for PASETO session tokens (min 32 bytes, generate with: openssl rand -hex 32)
SESSION_AUTH_SECRET=

# ── Docker / Sidecar ──────────────────────────────────────────────────────────

# Sidecar container image
SIDECAR_IMAGE=ghcr.io/tangle-network/sidecar:latest

# Host/port the sidecar is reachable at (from outside the container network)
SIDECAR_PUBLIC_HOST=127.0.0.1
SIDECAR_HTTP_PORT=8080
SIDECAR_SSH_PORT=22

# Pull sidecar image on first use (set false if pre-cached)
SIDECAR_PULL_IMAGE=true

# Optional: Docker daemon socket (defaults to local socket)
# DOCKER_HOST=unix:///var/run/docker.sock

# ── Operator API ──────────────────────────────────────────────────────────────

# CORS allowed origins (comma-separated). Defaults to "*" (dev mode).
# In production, set to your frontend domain(s).
CORS_ALLOWED_ORIGINS=https://your-frontend.example.com

# Request timeout for sidecar proxied calls (seconds)
REQUEST_TIMEOUT_SECS=30

# ── Workflows ─────────────────────────────────────────────────────────────────

# Cron expression for workflow tick evaluation
WORKFLOW_CRON_SCHEDULE=0 * * * * *

# ── TEE (optional) ────────────────────────────────────────────────────────────

# Backend selection: phala | nitro | aws | gcp | azure | direct
# Leave unset for non-TEE operators.
# TEE_BACKEND=phala

# Phala dstack
# PHALA_API_KEY=
# PHALA_API_ENDPOINT=https://cloud.phala.network

# AWS Nitro Enclaves
# AWS_REGION=us-east-1
# AWS_NITRO_INSTANCE_TYPE=c5.xlarge
# AWS_NITRO_KMS_KEY_ID=
# AWS_NITRO_IAM_INSTANCE_PROFILE=
# AWS_NITRO_SUBNET_ID=
# AWS_NITRO_SECURITY_GROUP_ID=

# GCP Confidential Space
# GCP_PROJECT_ID=
# GCP_ZONE=us-central1-a
# GCP_MACHINE_TYPE=n2d-standard-4
# GCP_SERVICE_ACCOUNT_EMAIL=
# GCP_NETWORK=default
# GCP_SUBNET=default
# GCP_KMS_KEY_RESOURCE=

# Azure Confidential VMs + SKR
# AZURE_SUBSCRIPTION_ID=
# AZURE_RESOURCE_GROUP=
# AZURE_LOCATION=eastus
# AZURE_VM_SIZE=Standard_DC4as_v5
# AZURE_KEY_VAULT_URL=
# AZURE_MAA_ENDPOINT=

# Direct (operator-managed hardware)
# TEE_DIRECT_TYPE=tdx  # tdx | sev | nitro
